@page "/admin/restaurant/{RestaurantId:int}/dish/{DishId:int}"
@using QRCodeMenu.Client.Components
@using QRCodeMenu.Shared.Dto
@using static QRCodeMenu.Client.Components.Diver
@inherits RestaurantChildBaseComponent



<Diver Items=DiverItems />

<p>@Dish.Name</p>


@code {

    [Parameter]
    public int DishId { get; set; }
    protected DishDto Dish { get; set; } = new();

    protected override DiverItem[] DiverItems =>
        base.DiverItems.Concat(new DiverItem[]
            {
            new("Dishes", $"/admin/restaurant/{RestaurantId}/dish/"),
            new(Dish.Name, null)
            }).ToArray();

    protected override async Task LoadOnInitialized()
    {
        await base.LoadOnInitialized();
        await LoadDish();
    }

    protected async Task LoadDish()
    {
        var result = await Http.GetFromJsonAsync<DishDto>($"/api/admin/dish/{RestaurantId}/{DishId}")
            ?? new();
        Dish = result;
    }
}
